if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.jQuery&&(akeeba.jQuery=window.jQuery.noConflict());
var akeebasubs_cpanel_graph_from="",akeebasubs_cpanel_graph_to="",akeebasubs_cpanel_graph_level="",akeebasubs_cpanel_graph_salesPoints=[],akeebasubs_cpanel_graph_subsPoints=[],akeebasubs_cpanel_graph_levelsPoints=[],akeebasubs_cpanel_graph_levelsLabels=[],akeebasubs_cpanel_graph_levelsColors=[],akeebasubs_cpanel_graph_plot1=null,akeebasubs_cpanel_graph_plot2=null,akeebasubs_cpanel_level_to_color={DATACOMPLIANCE:"#E2363C",CONTACTUS:"#40B5B8",BUNDLE:"#514F50",AKEEBABACKUP:"#40B5B8",PROMO:"#40B5B8",
ADMINTOOLS:"#E2363C",AKEEBASUBS:"#e6e2d3",AKEEBATICKETS:"#514F50",COMMERCE:"#b9936c",ESSENTIALS:"#93C34E",JOOMLADELUXE:"#F0AD4E",RESELLERCREDITS:"#f7cac9",SOLOPHP:"rgb(153, 102, 255)",BACKUPWP:"rgb(54, 162, 235)",ATOOLSWP:"rgb(255, 99, 132)","ATWP-BETA":"rgb(255, 99, 132)",WPBUNDLE:"rgb(75, 192, 192)",SUPPORT:"#dac292",MINISUPPORT:"#c4b7a6"};
function akeebasubs_cpanel_graphs_load(){akeebasubs_cpanel_graph_from=document.getElementById("akeebasubs_graph_datepicker").value;akeebasubs_cpanel_graph_to=document.getElementById("akeebasubs_graph_todatepicker").value;akeebasubs_cpanel_graph_level=1*document.getElementById("akeebasubs_graph_level_id").value;if(""==akeebasubs_cpanel_graph_to){var a=new Date(akeebasubs_cpanel_graph_from);a=new Date(a.getTime()+2592E6);akeebasubs_cpanel_graph_to=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1)+"-"+a.getUTCDate()}akeebasubs_cpanel_graph_salesPoints=
[];akeebasubs_cpanel_graph_subsPoints=[];akeebasubs_cpanel_graph_levelsPoints=[];a=akeeba.jQuery;a("#aklevelschart").hide();a("#aksaleschart").hide();a("#akthrobber").show();a("#akthrobber2").show();akeebasubs_load_sales()}
function akeebasubs_load_sales(){(function(a){var b="index.php?option=com_akeebasubs&view=SubscriptionStatistics&since="+akeebasubs_cpanel_graph_from+"&until="+akeebasubs_cpanel_graph_to+"&groupbydate=1&filter_order=date&paystate=C&nozero=1&savestate=0&format=json";0<akeebasubs_cpanel_graph_level&&(b+="&level="+akeebasubs_cpanel_graph_level);a.getJSON(b,function(b){a.each(b,function(a,b){akeebasubs_cpanel_graph_salesPoints.push({t:b.date,y:1*parseInt(100*b.net)/100});akeebasubs_cpanel_graph_subsPoints.push({t:b.date,
y:1*b.subs})});a("#akthrobber").hide();a("#aksaleschart").show();0==akeebasubs_cpanel_graph_salesPoints.length?a("#aksaleschart-nodata").show():(akeebasubs_render_sales(),akeebasubs_load_levels())})})(akeeba.jQuery)}
function akeebasubs_load_levels(){(function(a){var b="index.php?option=com_akeebasubs&view=SubscriptionStatistics&since="+akeebasubs_cpanel_graph_from+"&until="+akeebasubs_cpanel_graph_to+"&groupbylevel=1&paystate=C&nozero=1&savestate=0&format=json";0<akeebasubs_cpanel_graph_level&&(b+="&level="+akeebasubs_cpanel_graph_level);a.getJSON(b,function(b){akeebasubs_cpanel_graph_levelsPoints=[];akeebasubs_cpanel_graph_levelsLabels=[];akeebasubs_cpanel_graph_levelsColors=[];a.each(b,function(a,b){akeebasubs_cpanel_graph_levelsPoints.push(.01*
parseInt(100*b.net));akeebasubs_cpanel_graph_levelsLabels.push(b.title);akeebasubs_cpanel_graph_levelsColors.push(akeebasubs_get_color(b.title))});a("#akthrobber2").hide();a("#aklevelschart").show();0==akeebasubs_cpanel_graph_levelsPoints.length?a("#aklevelschart-nodata").show():akeebasubs_render_levels()})})(akeeba.jQuery)}function akeebasubs_get_color(a){a=a.toUpperCase();return a in akeebasubs_cpanel_level_to_color?akeebasubs_cpanel_level_to_color[a]:"#EFEFEF"}
function akeebasubs_render_sales(){var a={type:"bar",data:{datasets:[{label:"Sales",data:akeebasubs_cpanel_graph_salesPoints,borderColor:"#93C34E",fill:!1,yAxisID:"y-axis-sales",type:"line"},{label:"Subscriptions",data:akeebasubs_cpanel_graph_subsPoints,backgroundColor:"#40B5B8AA",fill:!0,yAxisID:"y-axis-subs"}]},options:{legend:{display:!1},scales:{xAxes:[{type:"time",time:{round:"day",tooltipFormat:"ll",unit:"day",minUnit:"day"},ticks:{fontColor:"#F0AD4E"}}],yAxes:[{id:"y-axis-subs",position:"left",
ticks:{fontColor:"#93C34E",beginAtZero:!0}},{id:"y-axis-sales",position:"right",ticks:{fontColor:"#40B5B8",beginAtZero:!0,callback:function(a,c,d){return a+" \u20ac"}},gridLines:{drawOnChartArea:!1}}]}}};akeebasubs_cpanel_graph_plot1&&(akeebasubs_cpanel_graph_plot1.destroy(),akeebasubs_cpanel_graph_plot1=null);akeebasubs_cpanel_graph_plot1=new Chart(document.getElementById("aksaleschart"),a)}
function akeebasubs_render_levels(){var a={type:"doughnut",data:{datasets:[{label:"Sales",data:akeebasubs_cpanel_graph_levelsPoints,backgroundColor:akeebasubs_cpanel_graph_levelsColors}],labels:akeebasubs_cpanel_graph_levelsLabels},options:{responsive:!0,cutoutPercentage:40,legend:{display:!0,labels:{usePointStyle:!0,fontColor:"#F0AD4E"}},tooltips:{callbacks:{label:function(a,c){var b=c.labels[a.index]||"";b&&(b+=": ");b+=Math.round(100*c.datasets[a.datasetIndex].data[a.index])/100;return b+" \u20ac"}}}}};
akeebasubs_cpanel_graph_plot2&&(akeebasubs_cpanel_graph_plot2.destroy(),akeebasubs_cpanel_graph_plot2=null);akeebasubs_cpanel_graph_plot2=new Chart(document.getElementById("aklevelschart"),a)};
